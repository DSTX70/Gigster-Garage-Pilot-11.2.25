Locked and loaded. I added both the **Switchboard** and the **Status Widget** and packaged them so you can drop them into your current build (or use the standalone add-on if your paths differ).

# What you got

* ğŸ§  **Switchboard script** (evaluates KPIs + flip dates â†’ sets `expose_to_users`)
  `scripts/switchboard.mjs`
* ğŸ“Š **Status Widget** (traffic-light panel wired to flags + KPIs)
  `src/components/AgentStatus.tsx`
* ğŸ“ **Sample data** (replace with your live feeds anytime)
  `public/gg_visibility_flags_patch.json` and `public/agent_kpis.json`
* ğŸ§¾ **Generated flags output** (created by switchboard)
  `public/visibility_flags.json`
* ğŸ”§ **NPM hook** added: `npm run switchboard`
* (If the Vite scaffold was detected) **App mounted** the panel on your homepage.

**Download (add-on bundle):**
[gg_switchboard_status_addon.zip](sandbox:/mnt/data/gg_switchboard_status_addon.zip)

---

## How to use (Replit / Vite scaffold)

1. **Unzip into your project root** (same level as `package.json`).

   * If prompted, allow it to **merge** `scripts/`, `public/`, and `src/components/`.
2. Run the switchboard once to generate the live flags file:

   ```bash
   npm run switchboard
   ```

   This creates `public/visibility_flags.json` (used by the widget).
3. Start the app:

   ```bash
   npm run dev
   ```
4. Open your app and youâ€™ll see **Agent Status â€” KPIs vs. Thresholds** with red/amber/green lights per agent.

   * **Green** = KPIs met
   * **Amber** = date flip pending (will expose on flip date)
   * **Red** = neither KPIs nor date threshold met yet

### Swap in real data

* Replace `public/agent_kpis.json` with your Hub-generated snapshot (same keys).
* Replace `public/gg_visibility_flags_patch.json` with your master flags/grad plans.
* Re-run:

  ```bash
  npm run switchboard
  ```

### CI integration (optional)

Add to your workflow (already injected automatically if the prior CI file existed):

```yaml
- run: npm run switchboard
```

This keeps `visibility_flags.json` current in every build.

---

If you want, I can also:

* Add a **live KPI puller** that hits a Hub endpoint (e.g., `/review/{run_id}` aggregation) instead of reading JSON files, or
* Create a **Switchboard dashboard page** with filters, trend sparklines, and one-click â€œpromote to externalâ€ actions.
